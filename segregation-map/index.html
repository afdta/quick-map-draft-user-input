<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!--<link rel="stylesheet" type="text/css" href="quickmap.css">-->
<script src="../d3min.js"></script>
<script src="../map-class.js"></script>

</head>


<body style="margin:20px;">
    <div id="wfrey-map-wrap"></div>
</body>

<script>
  var el = document.getElementById("wfrey-map-wrap");
  var map = new dotMap(el);
  var repo = "./data/";
  var parser = function(ROW){
    return {
      CBSA_Code: ROW.CBSA_Code,
      name: ROW.CBSA_Title,
      index: +ROW.Index,
      cat: +ROW.Group
    }
  };
  d3.csv((repo + "FreySegregationMap.csv"), parser, function(ERR,DAT){
    console.log(DAT);
    var callback = function(){
      //this == map object
      var sel = this.metros.data(DAT, function(d,i){
        return d.CBSA_Code;
      });
      sel.enter().append("circle");
      sel.exit().remove("circle");
      return sel;
    };
    map.drawMap(true, callback);
  });
</script>

</html>